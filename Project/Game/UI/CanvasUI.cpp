#include "CanvasUI.h"
#include "Engine/System/Editer/Window/EditerWindows.h"

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 初期化処理
///////////////////////////////////////////////////////////////////////////////////////////////

void CanvasUI::Init() {
	reticle_ = std::make_unique<Reticle>();
	reticle_->Init();

	energyOutput_ = std::make_unique<EnergyOutput>();
	energyOutput_->Init();

	postureStability_ = std::make_unique<PostureStability>();
	postureStability_->Init();

	AddChild(energyOutput_.get());

#ifdef _DEBUG
	EditerWindows::AddObjectWindow(this, "Canvas");
#endif // _DEBUG
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 更新処理
///////////////////////////////////////////////////////////////////////////////////////////////

void CanvasUI::Update() {
	reticle_->Update(pBoss_->GetTransform()->GetWorldMatrix(), pFollowCamera_->GetVpvpMatrix());
	
	const Player::Parameter& playerParam = pPlayer_->GetParam();
	energyOutput_->Update(playerParam.energy);
	//postureStability_->Update();
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 描画処理
///////////////////////////////////////////////////////////////////////////////////////////////

void CanvasUI::Draw() const {
	reticle_->Draw();

	energyOutput_->Draw();
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 編集処理
///////////////////////////////////////////////////////////////////////////////////////////////

#ifdef _DEBUG
void CanvasUI::Debug_Gui() {
	
}
#endif