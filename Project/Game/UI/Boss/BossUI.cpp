#include "BossUI.h"
#include "Engine/Engine.h"
#include "Engine/Utilities/AdjustmentItem.h"
#ifdef _DEBUG
#include "Engine/Manager/ImGuiManager.h"
#endif

BossUI::BossUI() {}
BossUI::~BossUI() {}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　初期化処理
//////////////////////////////////////////////////////////////////////////////////////////////////

void BossUI::Init() {
	sprites_["bossHp"] = Engine::CreateSprite("kari_bossHp.png");

	// -------------------------------------------------
	// ↓ 調整項目系
	// -------------------------------------------------
	AdjustmentItem* adjust = AdjustmentItem::GetInstance();
	adjust->AddItem(groupName_, "hp_pos", sprites_["bossHp"]->GetTranslate());

	// 調整項目の適応
	AdaptAdjustment();
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　更新処理
//////////////////////////////////////////////////////////////////////////////////////////////////

void BossUI::Update(float bossHp) {
	sprites_["bossHp"]->SetUvMaxSize(Vector2(std::clamp(bossHp / 100.0f, 0.0f, 1.0f), 1.0f));

	sprites_["bossHp"]->Update();
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　描画処理
//////////////////////////////////////////////////////////////////////////////////////////////////

void BossUI::Draw() {
	sprites_["bossHp"]->Draw();
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　調整項目の適応
//////////////////////////////////////////////////////////////////////////////////////////////////

void BossUI::AdaptAdjustment() {
	AdjustmentItem* adjust = AdjustmentItem::GetInstance();
	sprites_["bossHp"]->SetTranslate(adjust->GetValue<Vector2>(groupName_, "hp_pos"));
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　Debug調整
//////////////////////////////////////////////////////////////////////////////////////////////////

#ifdef _DEBUG
void BossUI::Debug_Gui() {
	if (ImGui::TreeNode("BossUI")) {
		sprites_["bossHp"]->Debug_Gui("bossHp");
		ImGui::TreePop();
	}
}
#endif