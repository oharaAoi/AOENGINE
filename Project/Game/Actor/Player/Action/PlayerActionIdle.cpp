#include "PlayerActionIdle.h"
#include "Game/Actor/Player/Player.h"
#include "Game/Actor/Player/Action/PlayerActionMove.h"
#include "Game/Actor/Player/Action/PlayerActionJump.h"
#include "Game/Actor/Player/Action/PlayerActionShotRight.h"
#include "Game/Actor/Player/Action/PlayerActionShotLeft.h"

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 設定時のみ行う処理
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionIdle::Build() {
	SetName("actionIdle");
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 初期化
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionIdle::OnStart() {
	actionTimer_ = 0;

	pOwner_->GetJetEngine()->JetIsStop();

	pOwner_->GetGameObject()->GetAnimetor()->TransitionAnimation("idle", 0.5f);
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 更新
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionIdle::OnUpdate() {
	actionTimer_ += GameTimer::DeltaTime();

	pOwner_->RecoveryEN(actionTimer_);
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 終了
//////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionIdle::OnEnd() {
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 次に行うアクションの判定
//////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionIdle::CheckNextAction() {
	/*if (pOwner_->GetTransform()->translate_.y >= 1.f) {
		AddAction<PlayerActionJump>();
	}*/

	if (CheckInput<PlayerActionMove>()) {
		NextAction<PlayerActionMove>();
	}

	if (CheckInput<PlayerActionJump>()) {
		NextAction<PlayerActionJump>();
	}

	if (CheckInput<PlayerActionShotRight>()) {
		NextAction<PlayerActionShotRight>();
	}

	if (CheckInput<PlayerActionShotLeft>()) {
		NextAction<PlayerActionShotLeft>();
	}
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 入力処理
///////////////////////////////////////////////////////////////////////////////////////////////

bool PlayerActionIdle::IsInput() {
	return false;
}
