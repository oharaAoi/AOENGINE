#include "PlayerActionIdle.h"
#include "Game/Actor/Player/Player.h"
#include "Game/Actor/Player/Action/PlayerActionMove.h"
#include "Game/Actor/Player/Action/PlayerActionJump.h"
#include "Game/Actor/Player/Action/PlayerActionShotRight.h"
#include "Game/Actor/Player/Action/PlayerActionShotLeft.h"

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 設定時のみ行う処理
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionIdle::Build() {
	SetName("actionIdle");
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 初期化
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionIdle::OnStart() {
	moveAction_ = pManager_->GetActionInstance<PlayerActionMove>();
	jumpAction_ = pManager_->GetActionInstance<PlayerActionJump>();
	shotAction_ = pManager_->GetActionInstance<PlayerActionShotRight>();

	actionTimer_ = 0;
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 更新
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionIdle::OnUpdate() {
	actionTimer_ += GameTimer::DeltaTime();
	pOwner_->RecoveryEN(actionTimer_);
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 終了
//////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionIdle::OnEnd() {
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 次に行うアクションの判定
//////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionIdle::CheckNextAction() {
	if (moveAction_->IsInput()) {
		NextAction<PlayerActionMove>();
	}

	if (jumpAction_->IsInput()) {
		NextAction<PlayerActionJump>();
	}

	if (shotAction_->IsInput()) {
		NextAction<PlayerActionShotRight>();
	}

	if (shotAction_->IsInput()) {
		NextAction<PlayerActionShotLeft>();
	}
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 入力処理
///////////////////////////////////////////////////////////////////////////////////////////////

bool PlayerActionIdle::IsInput() {
	return false;
}
