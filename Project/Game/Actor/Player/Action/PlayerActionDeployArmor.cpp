#include "PlayerActionDeployArmor.h"
#include "Game/Actor/Player/Player.h"
#include "Game/Actor/Player/Action/PlayerActionIdle.h"

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 編集処理
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionDeployArmor::Debug_Gui() {
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 設定処理
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionDeployArmor::Build() {
	SetName("ActionDeployArmor");
	pInput_ = Input::GetInstance();
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 初期化処理
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionDeployArmor::OnStart() {
	actionTimer_ = 0.0f;
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 更新処理
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionDeployArmor::OnUpdate() {
	actionTimer_ += GameTimer::DeltaTime();
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 終了処理
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionDeployArmor::OnEnd() {
	pOwner_->SetDeployArmor(true);
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 次のアクション確認
///////////////////////////////////////////////////////////////////////////////////////////////

void PlayerActionDeployArmor::CheckNextAction() {
	if (actionTimer_ > 2.0f) {
		NextAction<PlayerActionIdle>();
	}
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 入力処理
///////////////////////////////////////////////////////////////////////////////////////////////

bool PlayerActionDeployArmor::IsInput() {
	if (pInput_->IsTriggerButton(XInputButtons::RSTICK_THUMB)) {
		return true;
	}
	return false;
}
