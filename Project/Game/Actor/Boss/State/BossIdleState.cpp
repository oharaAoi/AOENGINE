#include "BossIdleState.h"
#include "Game/Actor/Boss/Boss.h"

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 開始処理
///////////////////////////////////////////////////////////////////////////////////////////////

void BossIdleState::OnStart() {
	SetName("IdleState");
	param_.Load();
	floatingTween_.Init(param_.start, param_.end, param_.time, (int)EasingType::InOut::Sine, LoopType::Return);
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 更新処理
///////////////////////////////////////////////////////////////////////////////////////////////

void BossIdleState::OnUpdate() {
	Math::Vector3 pos = pOwner_->GetTransform()->GetTemporaryTranslate();
	floatingTween_.Update(AOENGINE::GameTimer::DeltaTime());
	pos.y += floatingTween_.GetValue();
	pOwner_->GetTransform()->SetTemporaryTranslate(pos);
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ↓ 終了処理
///////////////////////////////////////////////////////////////////////////////////////////////

void BossIdleState::OnExit() {
}

void BossIdleState::Debug_Gui() {
	param_.Debug_Gui();
}

void BossIdleState::Parameter::Debug_Gui() {
	ImGui::DragFloat("start", &start, 0.1f);
	ImGui::DragFloat("end", &end, 0.1f);
	ImGui::DragFloat("time", &time, 0.1f);
	SaveAndLoad();
}